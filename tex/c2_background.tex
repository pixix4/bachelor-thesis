\chapter{Hintergrund}
\label{chap:background}

Um in der weiteren Arbeit den Konsistenzvergleich zwischen BPMN- und BROS-Modellen durchführen zu können, werden zunächst die Modelle vorgestellt.
Für jedes Modell werden die Modellelemente eingeführt, die in der Arbeit unterstützt werden.
Diese werden in ein Metamodell eingeordnet das als Grundlage für den späteren Konsistenzvergleich dient.
Da BROS auf der Modellierungssprache CROM basiert, wird zunächst CROM vorgestellt.

Es existieren Modellelemente die sowohl in BPMN als auch in BROS den gleichen Namen haben (wie z. B. ``Event'').
Um diese leichter unterscheiden zu können, werden die Modellelemente mit dem Präfix "BPMN" bzw. "BROS" benannt.

\section{Business Process Model and Notation}

Die \emph{Business Process Model and Notation} (\textbf{BPMN}) ist ein weit verbreiteter Standard für die grafische Beschreibung von Geschäftsprozessen.
Dabei wird das Verhalten eines Systems mit einer an Flussdiagrammen angelehnten Form beschrieben.
Einer der Hauptvorteile von BPMN ist die große Verbreitung.
Dadurch können Prozessbeschreibungen auf einfache Art und Weise zwischen verschieden Plattformen und Stakeholdern ausgetauscht werden.
Neben der informellen Beschreibung von Prozessen unterstützt BPMN auch die direkte Ausführung von Geschäftsprozessen.
Mittels diversen Interpretern können in BPMN modellierte Abläufe zur Automatisierung einfacher Aufgaben oder ganzer Fertigungsprozesse genutzt werden.
Die Hauptelemente der BPMN, die auch in dieser Arbeit unterstützt werden, sind:

\begin{itemize}
    \item \textbf{Activity:} 
    Eine Activity beschreibt eine Tätigkeit die innerhalb des Geschäftsprozesses ausgeführt wird.
    Da das ausführen einer Aktion Zeit in Anspruch nehmen kann, kann auch die Abarbeitung einer Activity Zeit benötigen.
    Zur Darstellung einer Activity wird ein Rechteck mit abgerundeten Ecken verwendet.
    \item \textbf{Gateway:}
    Ein Gateway wird für die Steuerung des Kontrollflusses verwendet. 
    An einem Gateway können verschiedene Kontrollwege zusammenlaufen oder sich teilen. 
    Dabei werden verschiedene Arten, wie z. B. AND- und OR-Gateways unterstützt. 
    Je nach verwendetem Gateway verläuft der weitere Kontrollfluss z. B. parallel oder nur einer der möglichen Wege wird genutzt.
    Dargestellt wird ein Gateway mittels einem um 45 Grad gedrehtem Quadrat. 
    \item \textbf{Event:}
    Ein Event beschreibt ein Ereignis das innerhalb des Geschäftsprozesses auftreten kann und wird mit einem Kreis dargestellt.
    Events beeinflussen den Kontrollfluss, können ihn starten, beendet oder andere unabhängige Aktionen auslösen.
    Sie werden in drei verschiedenen Dimensionen eingeteilt: nach ihrer Position, nach ihrer Wirkung und nach ihrer Art.
    Für die weitere Arbeit ist nur die Unterteilung nach ihrer Position, innerhalb des Geschäftsprozesses, wichtig.
    Dabei wird zwischen einem StartEvent (einfacher Rahmen), einem IntermediateEvent (doppelter Rahmen) und einem EndEvent (dicker Rahmen) unterschieden.
    Zusätzlich existiert noch das TerminationEvent welches den laufenden Prozess vollständig abbricht und mit einem fast vollständig ausgefülltem EndEvent repräsentiert wird.
    \item \textbf{Flow:}
    Ein Flow ist eine gerichtete Verbindung zwischen Modellelementen.
    Dabei wird zwischen dne Sequence- und den MessageFlows unterschieden.
    Ein SequenceFlow stellt den Kontrollfluss dar und verbindet Elemente um eine Ausführungsreihenfolge festzulegen.
    Ein MessageFlow verbindet unterschiedliche Teilnehmer des Geschäftsprozesses und symbolisiert den Austausch von Mitteilungen.
    Beide Flows werden mit einem Pfeil dargestellt, wobei der MessageFlow gestrichelt ist.
    \item \textbf{Pool:}
    Ein Pool stellt eine Gruppe von zusammengehörenden Teilnehmern innerhalb eines Geschäftsprozesses dar.
    Wenn ein Prozess nur aus einem Pool besteht kann der Pool und der Prozess als ein Element dargestellt werden.
    Dargestellt wird ein Pool mit einem Rechteck wobei der Name am linken Rand steht.
    \item \textbf{Swimlane:}
    Eine Swimlane ist ein einzelner Teilnehmer der zu einem Pool gehört und Aufgaben aus dem Geschäftsprozess erfüllt.
    Bei einem Pool der nur aus einer Swimlane besteht kann die Swimlane mit dem Pool vereinigt werden.
    Sollte der Pool dabei auch gleichzeitig den Prozess darstellen, so kann die Swimlane als eigenständiger Prozess betrachtet werden.
    Innerhalb eines Pools wird die Simelane als eine horizontale Bahn dargestellt.
    \item \textbf{Process:}
    Ein Process bildet einen teil des Geschäftsprozesses ab und ist das Containerelement für die anderen Modellelemente.
    An dem vollständigen Geschäftsprozess können mehrere Prozesse beteiligt sein, die mittels MessageFlows untereinader kommunizieren.
    In Teilprozess kann, wie bereits beschieben, als Pool bzw. Swimlane oder auch als Activity dargestellt werden.
\end{itemize}

Da BPMN schon längere Zeit in Benutzung ist hat es eine gute Toolunterstützung für die Modellierung.
Eines dieser Tools ist bpmn.io\footnote{https://demo.bpmn.io/}.
Es ist ein webbasiertes Tool das einen großteil des BPMN-Standards unterstützt.
Das Tool speichert und lädt die BPMN-Modelle in einem auf XML-basierenden Format mit der Dateiendung \emph{.bpmn}.
Diese Datenstruktur basiert auf dem Metamodell das von der \emph{Object Management Group}\footnote{https://www.omg.org/spec/BPMN/2.0/About-BPMN/} spezifiziert wurde.

\begin{figure}
    \centering
    \begin{tikzpicture}
        \MMElement{0}{2}{4.5}{1}{BpmnMessageFlow};

        \MMElement{-5.75}{0}{4.5}{1}{BpmnSequenceFlow};
        \MMElement{5.75}{0}{4.5}{1}{\textit{BpmnElement}};

        \MMElement{0}{-2}{4.5}{1}{BpmnProcess};
        \MMElement{5.75}{-2}{4.5}{1}{BpmnLaneSet};

        \MMElement{0}{-4}{4.5}{1}{\textit{BpmnFlowObject}};
        \MMElement{5.75}{-4}{4.5}{1}{BpmnLane};

        \MMElement{-5.75}{-6}{4.5}{1}{BpmnGateway};
        \MMElement{0}{-6}{4.5}{1}{BpmnEvent};
        \MMElement{5.75}{-6}{4.5}{1}{BpmnTask};

        \MMElement{-5.75}{-8}{4.5}{1}{BpmnStartEvent};
        \MMElement{0}{-8}{4.5}{1}{BpmnIntermediateEvent};
        \MMElement{5.75}{-8}{4.5}{1}{BpmnEndEvent};

        \draw[-{Triangle[length=3mm,width=3mm,open]}] (-3.5,0) -- (3.5,0);
        \draw (0,1.5) -- (0,0);
        \draw (2.875,-3.8) -- (2.875,0);
        \draw (2.25,-1.8) -- (3.5,-1.8);
        \draw (2.25,-3.8) -- (3.5,-3.8);

        \draw[-{Triangle[length=3mm,width=3mm,open]}] (0,-5.5) -- (0,-4.5);
        \draw (-5.75,-5.5) -- (-5.75,-5.1) -- (5.75,-5.1) -- (5.75,-5.5);

        \draw[-{Triangle[length=3mm,width=3mm,open]}] (0,-7.5) -- (0,-6.5);
        \draw (-5.75,-7.5) -- (-5.75,-7.1) -- (5.75,-7.1) -- (5.75,-7.5);

        \draw[color=layer2, {Diamond[length=4mm,open]}-] (2.25,-2.2) -- (3.5,-2.2);
        \draw[color=layer2, {Diamond[length=4mm,open]}-] (3.5,-4.2) -- (2.25,-4.2);
        \draw[color=layer2, {Diamond[length=4mm,open]}-] (5.75,-2.5) -- (5.75,-3.5);
        \draw[color=layer2, {Diamond[length=4mm,open]}-] (0,-2.5) -- (0,-3.5);

        \draw[color=layer2, ->] (-5.5,-0.5) -- (-5.5,-3.8) -- (-2.25,-3.8) node[anchor=south east] {\small{source}};
        \draw[color=layer2, ->] (-6,-0.5) -- (-6,-4.2) -- (-2.25,-4.2) node[anchor=north east] {\small{target}};

        \draw[color=layer2, ->] (2.25,1.8) -- (5.5,1.8) -- (5.5,0.5) node[anchor=south west, rotate=90] {\small{source}};
        \draw[color=layer2, ->] (2.25,2.2) -- (6,2.2) -- (6,0.5) node[anchor=north west, rotate=90] {\small{target}};
    \end{tikzpicture}%
    \caption{BPMN Metamodell}%
    \label{fig:bpmnMetamodel}
\end{figure}

Für die weitere Arbeit wird allerdings nur ein Teil des vollständige BPMN-Standards der \emph{OMG} genutzt.
Ein deutlich gekürzte Version des Metamodelles für Business Prozesse wurde von \cite{Loja2010} erstellt.
Das hier verwendete Metamodell basiert auf den Metamodellen der \emph{OMG} und von \cite{Loja2010} (vgl. \cref{fig:bpmnMetamodel}).
Es unterstützt dabei nur die oben genannten BPMN-Elemente.
Weitere BPMN-Elemente werden in dieser Arbeit und dem später entwickeltem Tool nicht betrachtet.

Mit dem BPMN-Metamodell aus \cref{fig:bpmnMetamodel} wird ein BPMN-Modell in einem Graphen, genauer einem Baum mit Querverweisen, dargestellt.
Die Wurzel des Baumes ist das Modell ansich.
Dieses kann mehrere Prozesse (BpmnProcess) enthalten.
Jeder Prozess beinhalten verschiedene Flowobjekte, dazu zählen Events (BpmnEvent), Gateways (BpmnGateway) und Activities (BpmnTask).
Die Events teilen sich in die drei Unterklassen, die Start-, Intermediate- und EndEvents, auf (BpmnStartEvent, BpmnIntermediateEvent, BpmnEndEvent).
Außerdem kann ein Prozess mehrere Pools (BpmnLaneSet) und Swimlanes (BpmnLane) enthalten.
Hierbei ist zu beachten das, obwohl eine Swimlane auch Flowobjekte enthalten kann, jedes Flowobjekt nur einen Container haben darf.
So kann ein Flowobjekt nicht gleichzeitig Kind eines Prozesses und einer Swimlane sein.
Jedes Kind einer Swimlane ist transitiv auch Kind von dem Elternprozess der Swimlane.
Die beiden Flow-Arten bilden die Querverweise innerhalb des Baumes.
Ein MessageFlow (BpmnMessageFlow) kann zwischen allen BPMN-Elementen gezeichnet werden, wird aber hauptsächlich nur für die Kommunikation zwischen Prozessen verwendet.
Der SequenceFlow (BpmnSequenceFlow) stellt den Ablauf innerhalb eines Prozesses dar und darf nur zwischen Flowobjekten existieren.

\section{Compartment Role Object Model}

Das \emph{Compartment Role Object Model} (\textbf{CROM}) ist eine Modellierungssprache für rollenbasierte Systeme.
Eine Rolle beschreibt einen Aufgabenbereich der von verschiedenen Entitäten übernommen werden kann, man sagt die Entität spielt die Rolle.
CROM führt zusätzlich noch das \emph{Compartment} ein, das den Kontext der Rolle abbildet, in dem diese gespielt werden kann.
Dadurch wird das Modell in drei logische Aspekte unterteilt, den Verhaltensaspekt, den Relationenaspekt und den Kontextaspekt.
Der Verhaltensaspekt beschreibt die Aktoren bzw. Entitäten und die Rollen die von diesen gespielt werden können.
Der Relationenaspekt fügt zu den Rollen weitere Constraints und Verbindungsbeschreibungen hinzu.
Im dritten Aspekt, dem Kontextaspekt wird mittels den Compartments die Kontextabhängigkeit modelliert.
Die dafür genutzten Elemente sind:

\begin{itemize}
    \item \textbf{RoleType:}
    Eine RoleType ist die Darstellung einer Rolle.
    Sie wird mit einem abgerundeten Rechteck dargestellt, das, vergleichbar mit einer UML-Klasse, in drei Bereiche unterteilt ist.
    In den Bereichen werden der Name, die Attribute und die Methoden der Rolle abgebildet.
    Eine Entität die diese Rolle spielt werden diese Attribute und Methoden hinzufügt.
    \item \textbf{CompartmentType:}
    Ein CompartmentType bildet den Kontext von verschiedene RoleTypes ab.
    Das Compartment ist an sich auch eine Rolle und kann von Entitäten gespielt werden.
    Graphisch wird es wie eine UML-Klasse dargestellt, die zusätzlich noch ein weiteres Feld für die beinhalteten Rollen besitzt.
    \item \textbf{NaturalType:}
    Ein NaturalType oder auch DataType stellt eine Entität bzw Aktor des Modelles dar.
    Sie unterschieden sich nur in der Semantik.
    Der NaturalType bildet eine natürliche Person ab, wohingegen der DataType einen künstlichen Teilnehmer beschreibt.
    Dabei werden beide Arten mit einer UML-Klasse dargestellt. 
    \item \textbf{Fulfillment:}
    Ein Fulfillment ist eine Relation die eine Entität mit einer Rolle oder einem Compartment verbindet.
    Sie beschreibt welche Rolle von welchen Entitäten gespielt werden kann.
    Damit ist das Fulfillment immer von einer Entität auf eine Rolle gerichtet.
    \item \textbf{Relationship:}
    Eine Relationship ist eine Relation zwischen Entitäten oder Rollen die mit einer einfachen Linie ohne Pfeilenden dargestellt wird.
    Sie kann je nach Annotierung ein Constraint oder auch eine Verbindung zwischen diesen beschrieben.
    \item \textbf{Package:}
    Ein Package hilft bei der Strukturierung von großen Modellen.
    In ihnen kann ein Submodell abgebildet werden, in das nur Relationen hinein, aber nicht hinaus führen dürfen.
\end{itemize}

CROM besitzt mit dem Eclipse Plugin \emph{FRaMED-2.0}\footnote{https://github.com/Eden-06/FRaMED-2.0} einen eigenen graphischen Editorsupport.
Der Name des Editors ist ein Akronym für \emph{Full-fledged Role Modeling EDitor} und wurde speziell für CROM entwickelt.
Dabei unterstützt er den vollständigen Standard von CROM.
Mittels einem Feature Editor lassen sich bestimmt Modellfunktionen ein und ausschalten.

\section{Business Role-Object Specification}

Der neu entwickelte Ansatz der \emph{Business Role-Object Specification} (\textbf{BROS}) kombiniert die Vorteile der strukturbasierten Modellierung und der verhaltensbasierten Modellierung.
Als Grundlage für BROS dient die strukturbasierte Modellierungssprache CROM.
Diese wird ua. mit Hilfe von Events um den Verhaltensaspekt erweitert.
Ziel ist es einen bereits existierenden Geschäftsprozess wiederzuverwenden um auf dessen Basis die Businessobjekte zu modellieren.
Das so entstandene Modell kann anschließend als Vorlage für die eigentliche Implementierung genutzt werden (vgl \cite{Schoen}).
Dies hat den Vorteil das, obwohl es sich um ein Strukturmodell handelt, weiterhin der Ablauf des Prozesses erkennbar ist.
Damit ist leichter erkennbar wie Objekte miteinander interagieren.
Um dies zu ermöglichen wird der CROM-Standard um folgende Modellelemente erweitert:

\begin{itemize}
    \item \textbf{Scene:}
    Eine Scene stellt einen Teilnehmer innerhalb eines Prozesses dar.
    Sie besitzt Methoden und kann Rollen, Events und andere Scenen beinhalten.
    Dargestellt wird sie mit einem Rechteck mit doppeltem linkem Rahmen.
    \item \textbf{Event:}
    Ein Event beschreibt ein Ereignis innerhalb des Geschäftsprozesses.
    Mit einem Event kann eine Rolle erzeugt bzw. beendet werden.
    Dabei kann ein Event eine beliebige Abstraktion eines Prozesses sein.
    \item \textbf{Create-/DestroyRelation:}
    Eine Create- bzw. DestroyRelation verbindet ein Event mit einer Scene oder Rolle.
    Sie beschreibt welches Event für das erstellen oder das auflösen einer Rolle, innerhalb des Geschäftsprozesses, verantwortlich ist.
    Eine CreateRelation ist von einem Event zu einer Rolle bzw. Scene gerichtet, eine DestroyRelation verläuft in die gegensätzliche Richtung.
    \item \textbf{ReturnEvent:}
    Ein ReturnEvent ist ein Event, welches die aktuelle Scene beendet.
    Es wird als ein Event mit doppeltem Rahmen auf dem Rand der Scene dargestellt.
    Das ReturnEvent ist nicht mit einer DestroyRelation verbunden, da es implizit im gesamten Verlauf der Scene auftreten kann.
\end{itemize}

Auch BROS besitzt mit \emph{FRaMED.io}\footnote{https://eden-06.github.io/FRaMED-io/} Editorsupport.
\emph{FRaMED.io} ist eine Neuentwicklung von \emph{FRaMED-2.0} und wie \emph{bpmn.io} webbasiert.
Damit ist es Plattformübergreifend, ohne aufwendige Installation nutzbar.
Sie unterstützt das erstellen von CROM- und BROS-Modellen, ist aber nicht mit existierenden \emph{FRaMED-2.0}-Projekten kompatibel.

\begin{figure}
    \centering
    \begin{tikzpicture}
        \MMElement{-5.75}{4}{4.5}{1}{BrosRelationship};
        
        \MMElement{-5.75}{2}{4.5}{1}{BrosCreateRelation};
        \MMElement{0}{2}{4.5}{1}{\textit{BrosConnection}};
        
        \MMElement{-5.75}{0}{4.5}{1}{BrosDestroyRelation};
        \MMElement{0}{0}{4.5}{1}{\textit{BrosElement}};
        
        \MMElement{-5.75}{-2}{4.5}{1}{BrosEvent};
        \MMElement{0}{-2}{4.5}{1}{\textit{BrosObject}};
        \MMElement{5.75}{-2}{4.5}{1}{BrosRoleType};
        
        \MMElement{-5.75}{-4}{4.5}{1}{BrosReturnEvent};
        \MMElement{0}{-4}{4.5}{1}{\textit{BrosObjectGroup}};
        \MMElement{5.75}{-4}{4.5}{1}{BrosClass};
        
        \MMElement{-5.75}{-6}{4.5}{1}{BrosPackage};
        \MMElement{0}{-6}{4.5}{1}{BrosScene};
        \MMElement{5.75}{-6}{4.5}{1}{BrosCompartment};

        \draw[-{Triangle[length=3mm,width=3mm,open]}] (0,-5.5) -- (0,-4.5);
        \draw (-5.75,-5.5) -- (-5.75,-5.1) -- (5.75,-5.1) -- (5.75,-5.5);

        \draw[-{Triangle[length=3mm,width=3mm,open]}] (0,-3.5) -- (0,-2.5);
        \draw (-5.75,-3.1) -- (5.75,-3.1);
        \draw (-5.75,-3.5) -- (-5.75,-2.5);
        \draw (5.75,-3.5) -- (5.75,-2.5);

        \draw[-{Triangle[length=3mm,width=3mm,open]}] (0,-1.5) -- (0,-0.5);

        \draw[-{Triangle[length=3mm,width=3mm,open]}] (0,1.5) -- (0,0.5);

        \draw[-{Triangle[length=3mm,width=3mm,open]}] (-3.5,2) -- (-2.25,2);
        \draw (-3.5, 4) -- (-2.875, 4) -- (-2.875,0) -- (-3.5,0);

        \draw[color=layer2, {Diamond[length=4mm,open]}-] (2.25,-4) -- (2.875,-4) -- (2.875,-2) -- (2.25,-2);

        \draw[color=layer2, ->] (2.25,1.8) -- (4,1.8) -- (4,0.2) -- (2.25,0.2) node[anchor=south west] {\small{source}};
        \draw[color=layer2, ->] (2.25,2.2) -- (4.5,2.2) -- (4.5,-0.2) -- (2.25,-0.2) node[anchor=north west] {\small{target}};

        \begin{scope}[color=unimportant]
            \MMElement{-5.75}{6}{4.5}{1}{BrosInheritance};
            \MMElement{0}{6}{4.5}{1}{BrosFulfillment};
            \MMElement{5.75}{6}{4.5}{1}{BrosAggregation};
            \MMElement{5.75}{4}{4.5}{1}{BrosComposition};

            \draw[-{Triangle[length=3mm,width=3mm,open]}] (0, 5.5) -- (0,2.5);
            \draw (-5.75, 5.5) -- (-5.75,5) -- (5.75,5) (5.75,5.5) -- (5.75,4.5);
        \end{scope}
    \end{tikzpicture}%
    \caption{BROS Metamodell}%
    \label{fig:brosMetamodel}
\end{figure}


Das Metamodell in \cref{fig:brosMetamodel} basiert auf dem von \cite{Schoen} und dem in FRaMED.io implementierten Metamodell.
Die Elemente des Metamodelles teilen sich in zwei Klassen auf.
Auf der einen Seite sind die Connections, zu denen die Create-, DestroyRelation und die Relationship (BrosCreateRelation, BrosDestroyRelation, BrosRelationship) gehören.
Dazu zählen auch die vier Connections im oberen Bereich des Metamodelles (BrosInheritance, BrosFulfillment, BrosAggregation, BrosComposition).
Diese sind für die weitere Arbeit nicht relevant und werden deshalb ausgegraut dargestellt.
Da diese aber auch häufig für die Modellierung verwendet werden können, werdeb sie im Metamodell mit aufgeführt.
Auf der anderen Seite sind die Objekte die sich in Endknoten und Objektgruppen teilen.
Endknoten sind die Natural- und DataTypes (BrosClass), die RoleTypes (BrosRoleType), Events (BrosEvent) und ReturnEvents (BrosReturnEvent).
Die Objektgruppen sind Containerelemente die andere Objekte enthalten können.
Zu ihnen zählen der CompartmentType (BrosCompartment), das Package (BrosPackage) und die Scene (BrosScene).
Auch dieses Metamodell entspricht einem Graphen, genauer einem Baum mit Querverweisen.
Jedes Objekt darf nur Kind einer Objektgruppen sein und die Eltern-Kind-Beziehung ist transitiv.
Die Connections bilden die Querverweise innerhalb des Baumes.

Zusätzlich dazu existieren noch weitere Beschränkungen innerhalb des Metamodelles die nicht mit ihm dargestellt werden können.
Beispielsweise kann ein BrosCompartment nicht Bestandteil einer BrosScene sein.
Für die Einhaltung dieser Beschränkungen ist der Modellierer verantwortlich.
Allerdings kann dies auch automtisiert überprüft werden.
So unterstützt der BROS-Editor \emph{FRaMED-io} diese Bedingungen und erlaubt nur das erstellen von validen Modellen.
